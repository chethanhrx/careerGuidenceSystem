<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Careers | CareerGuide Admin</title>
  <link rel="stylesheet" href="../assets/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    .admin-header { padding: var(--space-lg); border-bottom: 1px solid var(--color-border); display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: var(--space-md); }
    .admin-main { padding: var(--space-lg); }
    .career-list { display: grid; gap: var(--space-md); }
    .career-item { display: flex; align-items: center; justify-content: space-between; padding: var(--space-lg); border: 1px solid var(--color-border); border-radius: var(--radius-lg); flex-wrap: wrap; gap: var(--space-md); }
    .career-item h3 { font-size: var(--text-base); margin-bottom: var(--space-xs); }
    .career-item p { font-size: var(--text-sm); color: var(--color-text-secondary); }
    .career-actions { display: flex; gap: var(--space-sm); }
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center; padding: var(--space-lg); opacity: 0; visibility: hidden; transition: opacity var(--transition-base), visibility var(--transition-base); }
    .modal.open { opacity: 1; visibility: visible; }
    .modal-content { background: var(--color-bg-card); border-radius: var(--radius-xl); padding: var(--space-xl); width: 100%; max-width: 480px; max-height: 90vh; overflow-y: auto; }
    .modal-content h2 { margin-bottom: var(--space-lg); }
    .modal-actions { margin-top: var(--space-lg); display: flex; gap: var(--space-md); justify-content: flex-end; }
    .page-loader { position: fixed; inset: 0; background: var(--color-bg); z-index: 9999; display: flex; align-items: center; justify-content: center; transition: opacity 0.4s ease, visibility 0.4s ease; }
    .page-loader.hidden { opacity: 0; visibility: hidden; }
    @media (min-width: 1024px) {
      .career-table { display: table; width: 100%; border-collapse: collapse; }
      .career-table .career-item { display: table-row; }
      .career-table .career-item > * { display: table-cell; vertical-align: middle; padding: var(--space-md); border-bottom: 1px solid var(--color-border); }
    }
  </style>
</head>
<body class="has-sidebar-admin">
  <div class="page-loader" id="pageLoader">
    <div class="skeleton" style="width: 90%; max-width: 600px; height: 200px; border-radius: var(--radius-xl);"></div>
  </div>

  <aside class="sidebar sidebar-admin" id="sidebar" style="display: none;">
    <div class="sidebar-brand">Admin</div>
    <ul class="sidebar-nav">
      <li><a href="dashboard.html">Dashboard</a></li>
      <li><a href="careers.html" class="active">Careers</a></li>
      <li><a href="questions.html">Questions</a></li>
      <li><a href="users.html">Users</a></li>
    </ul>
  </aside>

  <div class="main-with-sidebar">
  <header class="site-header">
    <div class="container">
      <div class="header-left">
        <a href="dashboard.html" class="logo">Career<span>Guide</span> Admin</a>
        <nav class="nav-links">
          <a href="dashboard.html">Dashboard</a>
          <a href="careers.html" class="active">Careers</a>
          <a href="questions.html">Questions</a>
          <a href="users.html">Users</a>
        </nav>
      </div>
      <div class="nav-actions">
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
          <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
          <svg class="icon-moon sr-only" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
        </button>
        <a href="dashboard.html" class="btn btn-ghost">Dashboard</a>
        <a href="questions.html" class="btn btn-ghost">Questions</a>
        <a href="users.html" class="btn btn-ghost">Users</a>
        <button class="hamburger" id="hamburger" aria-label="Open menu"><span></span><span></span><span></span></button>
      </div>
    </div>
  </header>
  <nav class="mobile-nav" id="mobileNav">
    <a href="dashboard.html">Dashboard</a>
    <a href="careers.html" class="active">Careers</a>
    <a href="questions.html">Questions</a>
    <a href="users.html">Users</a>
    <a href="../index.html">View site</a>
    <a href="login.html">Logout</a>
  </nav>

  <div class="admin-header">
    <h1>Manage careers</h1>
    <button type="button" class="btn btn-primary" id="addCareerBtn">Add career</button>
  </div>

  <main class="admin-main">
    <div class="career-list" id="careerList">
      <!-- Filled by JS -->
    </div>
  </main>
  </div>

  <div class="modal" id="careerModal">
    <div class="modal-content">
      <h2 id="modalTitle">Add career</h2>
      <form id="careerForm">
        <input type="hidden" id="careerId" name="id">
        <div class="form-group">
          <label class="form-label" for="careerName">Career name</label>
          <input type="text" id="careerName" name="name" class="form-input" placeholder="e.g. Software Developer" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="careerDesc">Description</label>
          <textarea id="careerDesc" name="description" class="form-textarea" placeholder="Brief description" rows="3"></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" id="modalCancel">Cancel</button>
          <button type="submit" class="btn btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    (function() {
      var theme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', theme);
      var btn = document.getElementById('themeToggle');
      var sun = btn && btn.querySelector('.icon-sun');
      var moon = btn && btn.querySelector('.icon-moon');
      if (btn) {
        if (theme === 'dark') { if (sun) sun.classList.add('sr-only'); if (moon) moon.classList.remove('sr-only'); }
        else { if (sun) sun.classList.remove('sr-only'); if (moon) moon.classList.add('sr-only'); }
        btn.addEventListener('click', function() {
          var isDark = document.documentElement.getAttribute('data-theme') === 'dark';
          document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
          localStorage.setItem('theme', isDark ? 'light' : 'dark');
          if (sun) sun.classList.toggle('sr-only', !isDark);
          if (moon) moon.classList.toggle('sr-only', isDark);
        });
      }

      var careers = [
        { id: '1', name: 'Software Developer', description: 'Build applications and systems.' },
        { id: '2', name: 'Data Analyst', description: 'Analyze data to drive decisions.' },
        { id: '3', name: 'UX Designer', description: 'Design user experiences.' }
      ];

      function renderCareers() {
        var list = document.getElementById('careerList');
        list.innerHTML = '';
        careers.forEach(function(c) {
          var item = document.createElement('div');
          item.className = 'career-item card';
          item.innerHTML = '<div><h3>' + c.name + '</h3><p>' + (c.description || '') + '</p></div><div class="career-actions"><button type="button" class="btn btn-secondary btn-edit" data-id="' + c.id + '">Edit</button><button type="button" class="btn btn-ghost btn-delete" data-id="' + c.id + '">Delete</button></div>';
          list.appendChild(item);
        });
        list.querySelectorAll('.btn-edit').forEach(function(b) {
          b.addEventListener('click', function() {
            var id = this.getAttribute('data-id');
            var c = careers.find(function(x) { return x.id === id; });
            if (c) {
              document.getElementById('modalTitle').textContent = 'Edit career';
              document.getElementById('careerId').value = c.id;
              document.getElementById('careerName').value = c.name;
              document.getElementById('careerDesc').value = c.description || '';
              document.getElementById('careerModal').classList.add('open');
            }
          });
        });
        list.querySelectorAll('.btn-delete').forEach(function(b) {
          b.addEventListener('click', function() {
            var id = this.getAttribute('data-id');
            if (confirm('Delete this career?')) {
              careers = careers.filter(function(x) { return x.id !== id; });
              renderCareers();
            }
          });
        });
      }

      document.getElementById('addCareerBtn').addEventListener('click', function() {
        document.getElementById('modalTitle').textContent = 'Add career';
        document.getElementById('careerForm').reset();
        document.getElementById('careerId').value = '';
        document.getElementById('careerModal').classList.add('open');
      });

      document.getElementById('modalCancel').addEventListener('click', function() {
        document.getElementById('careerModal').classList.remove('open');
      });

      document.getElementById('careerModal').addEventListener('click', function(e) {
        if (e.target === document.getElementById('careerModal')) document.getElementById('careerModal').classList.remove('open');
      });

      document.getElementById('careerForm').addEventListener('submit', function(e) {
        e.preventDefault();
        var id = document.getElementById('careerId').value;
        var name = document.getElementById('careerName').value.trim();
        var description = document.getElementById('careerDesc').value.trim();
        if (id) {
          var c = careers.find(function(x) { return x.id === id; });
          if (c) { c.name = name; c.description = description; }
        } else {
          careers.push({ id: String(Date.now()), name: name, description: description });
        }
        renderCareers();
        document.getElementById('careerModal').classList.remove('open');
      });

      renderCareers();
      var sidebar = document.getElementById('sidebar');
      if (sidebar) {
        function checkSidebar() { if (window.innerWidth >= 1024) sidebar.style.display = 'block'; else sidebar.style.display = 'none'; }
        checkSidebar();
        window.addEventListener('resize', checkSidebar);
      }
      var hamburger = document.getElementById('hamburger');
      var mobileNav = document.getElementById('mobileNav');
      if (hamburger && mobileNav) {
        hamburger.addEventListener('click', function() { hamburger.classList.toggle('open'); mobileNav.classList.toggle('open'); });
        mobileNav.querySelectorAll('a').forEach(function(a) { a.addEventListener('click', function() { hamburger.classList.remove('open'); mobileNav.classList.remove('open'); }); });
      }
      setTimeout(function() { document.getElementById('pageLoader').classList.add('hidden'); }, 400);
    })();
  </script>
</body>
</html>
