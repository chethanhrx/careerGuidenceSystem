<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Users & Results | CareerGuide Admin</title>
  <link rel="stylesheet" href="../assets/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    .admin-header { padding: var(--space-lg); border-bottom: 1px solid var(--color-border); }
    .admin-main { padding: var(--space-lg); }
    .user-cards { display: grid; gap: var(--space-md); }
    .user-card { padding: var(--space-lg); border: 1px solid var(--color-border); border-radius: var(--radius-lg); }
    .user-card h3 { font-size: var(--text-base); margin-bottom: var(--space-xs); }
    .user-card .meta { font-size: var(--text-sm); color: var(--color-text-muted); margin-bottom: var(--space-sm); }
    .user-card .result { font-size: var(--text-sm); color: var(--color-text-secondary); }
    .user-card .badge { margin-top: var(--space-sm); }
    .page-loader { position: fixed; inset: 0; background: var(--color-bg); z-index: 9999; display: flex; align-items: center; justify-content: center; transition: opacity 0.4s ease, visibility 0.4s ease; }
    .page-loader.hidden { opacity: 0; visibility: hidden; }
    .table-wrap { display: none; }
    @media (min-width: 1024px) {
      .table-wrap { display: block; overflow-x: auto; }
      .user-cards { display: none; }
      table { width: 100%; border-collapse: collapse; }
      th, td { padding: var(--space-md); text-align: left; border-bottom: 1px solid var(--color-border); }
      th { font-weight: 600; color: var(--color-text-secondary); background: var(--color-surface); }
    }
  </style>
</head>
<body class="has-sidebar-admin">
  <div class="page-loader" id="pageLoader">
    <div class="skeleton" style="width: 90%; max-width: 600px; height: 240px; border-radius: var(--radius-xl);"></div>
  </div>

  <aside class="sidebar sidebar-admin" id="sidebar" style="display: none;">
    <div class="sidebar-brand">Admin</div>
    <ul class="sidebar-nav">
      <li><a href="dashboard.html">Dashboard</a></li>
      <li><a href="careers.html">Careers</a></li>
      <li><a href="questions.html">Questions</a></li>
      <li><a href="users.html" class="active">Users</a></li>
    </ul>
  </aside>

  <div class="main-with-sidebar">
  <header class="site-header">
    <div class="container">
      <div class="header-left">
        <a href="dashboard.html" class="logo">Career<span>Guide</span> Admin</a>
        <nav class="nav-links">
          <a href="dashboard.html">Dashboard</a>
          <a href="careers.html">Careers</a>
          <a href="questions.html">Questions</a>
          <a href="users.html" class="active">Users</a>
        </nav>
      </div>
      <div class="nav-actions">
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
          <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
          <svg class="icon-moon sr-only" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
        </button>
        <a href="dashboard.html" class="btn btn-ghost">Dashboard</a>
        <a href="careers.html" class="btn btn-ghost">Careers</a>
        <a href="questions.html" class="btn btn-ghost">Questions</a>
        <button class="hamburger" id="hamburger" aria-label="Open menu"><span></span><span></span><span></span></button>
      </div>
    </div>
  </header>
  <nav class="mobile-nav" id="mobileNav">
    <a href="dashboard.html">Dashboard</a>
    <a href="careers.html">Careers</a>
    <a href="questions.html">Questions</a>
    <a href="users.html" class="active">Users</a>
    <a href="../index.html">View site</a>
    <a href="login.html">Logout</a>
  </nav>

  <div class="admin-header">
    <h1>Users & test results</h1>
    <p class="text-muted" style="margin-top: var(--space-xs);">View registered users and their assessment results.</p>
  </div>

  <main class="admin-main">
    <div class="user-cards" id="userCards">
      <!-- Mobile cards filled by JS -->
    </div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>User</th>
            <th>Email</th>
            <th>Test taken</th>
            <th>Top recommendation</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody id="userTableBody">
          <!-- Filled by JS -->
        </tbody>
      </table>
    </div>
  </main>
  </div>

  <script>
    (function() {
      var theme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', theme);
      var btn = document.getElementById('themeToggle');
      var sun = btn && btn.querySelector('.icon-sun');
      var moon = btn && btn.querySelector('.icon-moon');
      if (btn) {
        if (theme === 'dark') { if (sun) sun.classList.add('sr-only'); if (moon) moon.classList.remove('sr-only'); }
        else { if (sun) sun.classList.remove('sr-only'); if (moon) moon.classList.add('sr-only'); }
        btn.addEventListener('click', function() {
          var isDark = document.documentElement.getAttribute('data-theme') === 'dark';
          document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
          localStorage.setItem('theme', isDark ? 'light' : 'dark');
          if (sun) sun.classList.toggle('sr-only', !isDark);
          if (moon) moon.classList.toggle('sr-only', isDark);
        });
      }

      var users = [
        { id: 1, name: 'Priya Sharma', email: 'priya@example.com', testTaken: true, topRec: 'Software Developer', score: 88 },
        { id: 2, name: 'Rahul Kumar', email: 'rahul@example.com', testTaken: true, topRec: 'Data Analyst', score: 85 },
        { id: 3, name: 'Anita Singh', email: 'anita@example.com', testTaken: false, topRec: '--', score: '--' },
        { id: 4, name: 'Vikram Patel', email: 'vikram@example.com', testTaken: true, topRec: 'UX Designer', score: 82 },
        { id: 5, name: 'Sneha Reddy', email: 'sneha@example.com', testTaken: true, topRec: 'Digital Marketing', score: 79 }
      ];

      var cards = document.getElementById('userCards');
      var tbody = document.getElementById('userTableBody');
      users.forEach(function(u) {
        var card = document.createElement('div');
        card.className = 'user-card card';
        card.innerHTML = '<h3>' + u.name + '</h3><div class="meta">' + u.email + '</div><div class="result">Test: ' + (u.testTaken ? 'Yes' : 'No') + '</div><div class="result">Top: ' + u.topRec + '</div><span class="badge badge-primary">' + u.score + (u.testTaken ? '%' : '') + '</span>';
        cards.appendChild(card);

        var tr = document.createElement('tr');
        tr.innerHTML = '<td>' + u.name + '</td><td>' + u.email + '</td><td>' + (u.testTaken ? 'Yes' : 'No') + '</td><td>' + u.topRec + '</td><td>' + (u.testTaken ? u.score + '%' : '--') + '</td>';
        tbody.appendChild(tr);
      });
      var sidebar = document.getElementById('sidebar');
      if (sidebar) {
        function checkSidebar() { if (window.innerWidth >= 1024) sidebar.style.display = 'block'; else sidebar.style.display = 'none'; }
        checkSidebar();
        window.addEventListener('resize', checkSidebar);
      }
      var hamburger = document.getElementById('hamburger');
      var mobileNav = document.getElementById('mobileNav');
      if (hamburger && mobileNav) {
        hamburger.addEventListener('click', function() { hamburger.classList.toggle('open'); mobileNav.classList.toggle('open'); });
        mobileNav.querySelectorAll('a').forEach(function(a) { a.addEventListener('click', function() { hamburger.classList.remove('open'); mobileNav.classList.remove('open'); }); });
      }
      setTimeout(function() { document.getElementById('pageLoader').classList.add('hidden'); }, 400);
    })();
  </script>
</body>
</html>
